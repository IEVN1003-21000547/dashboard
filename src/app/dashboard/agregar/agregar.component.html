<div class="max-w-lg mx-auto p-4 bg-white shadow-lg rounded">
  <h2 class="text-xl font-semibold mb-4">Agregar Nuevo Usuario</h2>
  <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()" #form="ngForm">
    
    <div class="mb-4">
      <label for="nombre" class="block">Nombre</label>
      <input 
        id="nombre" 
        type="text" 
        formControlName="nombre" 
        class="w-full p-2 border rounded" 
        [class.border-red-500]="isCampoInvalido('nombre')"
      />
      <div *ngIf="isCampoInvalido('nombre')" class="text-red-500 text-sm mt-1">
        <div *ngIf="usuarioForm.get('nombre')?.errors?.['required']">
          El nombre es obligatorio.
        </div>
        <div *ngIf="usuarioForm.get('nombre')?.errors?.['minlength']">
          El nombre debe tener al menos 3 caracteres.
        </div>
      </div>
    </div>

    <div class="mb-4">
      <label for="correo" class="block">Correo</label>
      <input 
        id="correo" 
        type="email" 
        formControlName="correo" 
        class="w-full p-2 border rounded"
        [class.border-red-500]="isCampoInvalido('correo')"
      />
      <div *ngIf="isCampoInvalido('correo')" class="text-red-500 text-sm mt-1">
        <div *ngIf="usuarioForm.get('correo')?.errors?.['required']">
          El correo es obligatorio.
        </div>
        <div *ngIf="usuarioForm.get('correo')?.errors?.['email']">
          Ingresa un correo válido.
        </div>
      </div>
    </div>

    <div class="mb-4">
      <label for="password" class="block">Contraseña</label>
      <input 
        id="password" 
        type="password" 
        formControlName="password" 
        class="w-full p-2 border rounded" 
        [class.border-red-500]="isCampoInvalido('password')"
      />
      <div *ngIf="isCampoInvalido('password')" class="text-red-500 text-sm mt-1">
        <div *ngIf="usuarioForm.get('password')?.errors?.['required']">
          La contraseña es obligatoria.
        </div>
        <div *ngIf="usuarioForm.get('password')?.errors?.['minlength']">
          La contraseña debe tener al menos 6 caracteres.
        </div>
      </div>
    </div>
    

    <div class="mb-4">
      <label for="tipo" class="block">Tipo</label>
      <select 
        id="tipo" 
        formControlName="tipo" 
        class="w-full p-2 border rounded"
        [class.border-red-500]="isCampoInvalido('tipo')"
      >
        <option value="">Selecciona tipo</option>
        <option value="estudiante">Estudiante</option>
        <option value="tutor">Tutor</option>
      </select>
      <div *ngIf="isCampoInvalido('tipo')" class="text-red-500 text-sm mt-1">
        El tipo es obligatorio.
      </div>
    </div>

    <div class="mb-4">
      <label for="edad" class="block">Edad</label>
      <input 
        id="edad" 
        type="number" 
        formControlName="edad" 
        class="w-full p-2 border rounded"
        [class.border-red-500]="isCampoInvalido('edad')"
        min="1"
        max="100"
      />
      <div *ngIf="isCampoInvalido('edad')" class="text-red-500 text-sm mt-1">
        <div *ngIf="usuarioForm.get('edad')?.errors?.['required']">
          La edad es obligatoria.
        </div>
        <div *ngIf="usuarioForm.get('edad')?.errors?.['min']">
          La edad debe ser mayor o igual a 4 años.
        </div>
        <div *ngIf="usuarioForm.get('edad')?.errors?.['max']">
          La edad debe ser menor o igual a 100 años.
        </div>
      </div>
    </div>

    <button 
      type="submit"
      class="w-full p-2 rounded text-white"
      [class.bg-blue-500]="usuarioForm.valid"
      [class.bg-gray-300]="usuarioForm.invalid"
      [disabled]="usuarioForm.invalid"
    >
      Agregar Usuario
    </button>

    <div class="mt-4 text-sm text-gray-500" *ngIf="false">
      <p>Estado del formulario: {{ usuarioForm.status }}</p>
      <p>Formulario válido: {{ usuarioForm.valid }}</p>
      <pre>{{ usuarioForm.value | json }}</pre>
    </div>
  </form>
</div>